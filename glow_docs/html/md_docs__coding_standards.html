<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Glow: Coding Standards</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Glow
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Coding Standards </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This document provides general guidance for developing code for the project. The rules in this document guide us in writing high-quality code that will allow us to scale the project and ensure that the code base remains readable and maintainable.</p>
<h3>Follow the LLVM and Facebook coding standards</h3>
<p>Use the Facebook coding standards when writing c++ code. The Facebook coding standards are almost identical to the LLVM coding standards, except for lower case variable naming and the underscore suffix. The LLVM coding standards also covers topics that are compiler specific:</p>
<p>''' <a href="http://llvm.org/docs/CodingStandards.html">http://llvm.org/docs/CodingStandards.html</a> '''</p>
<p>The compiler uses the LLVM data structures, described in the links below. The LLVM data structures and utilities are efficient, well documented and battle hardened.</p>
<p>''' <a href="http://llvm.org/docs/ProgrammersManual.html">http://llvm.org/docs/ProgrammersManual.html</a> '''</p>
<p>The project uses a reasonable subset of C++11. Just like LLVM, the project does not use exceptions and RTTI.</p>
<h3>Small incremental changes</h3>
<p>The project is developed using small incremental changes. These changes can be small bug fixes or minor tweaks. Other times, these changes are small steps along the path to reaching larger stated goals. Long-term development branches suffer from many problems, including the lack of visibility, difficulty of code review, lack of testing of the branch and merge difficulty. Commits that go into the project need to be reviewable. This means that commits need to be relatively small, well documented and self-contained.</p>
<h3>Add tests</h3>
<p>Functional changes to the compiler need to include a testcase. Unit tests and regression tests are critical to the qualification of the compiler. Every bug fix needs to include a testcase.</p>
<h3>Format your code</h3>
<p>We encourage the use of clang-format to enforce code style and formatting. Commits that only change the formatting of code should go in separate commits. This makes reviewing the code and inspecting history easier.</p>
<p>It's recommended to use a pre-commit hook to properly format your code prior committing any changes. Run the following command from the root of the repo to enable the hook: <code>ln -s ../../utils/format.sh .git/hooks/pre-commit</code>.</p>
<h3>Commit messages</h3>
<p>Here are some guidelines about the format of the commit message:</p>
<p>Separate the commit message into a single-line title and a separate body that describes the change. Make the title short (80 chars) and readable. In changes that are restricted to a specific part of the code, include a [tag] at the start of the line in square brackets, for example, "[docs] ... ".</p>
<p>If the commit fixes an issue in the bug tracking system, include a link or a task number. When reverting a change make sure to add a short note that describes why the patch is being reverted.</p>
<h3>Code review</h3>
<p>The project relies on code review to maintain the software quality. Review other people's changes! Anybody is allowed to review code and comment on patches.</p>
<p>All changes, by all developers, must be reviewed before they are committed to the repository.</p>
<h3>Nits checklist</h3>
<p>There are some common issues that we flag in PRs that can be solved mechanically. Going through this checklist before submitting a PR will speed up the review process by eliminating round-trips for feedback.</p>
<ul>
<li>Remember copyright headers on new source files.</li>
<li>Prefer <code>llvm::StringRef</code>/<code>ArrayRef</code> to <code>std::string</code>/<code>vector</code>.</li>
<li>Comments are complete sentences: begin with a capital, end with a period.</li>
<li>Add Doxygen comments to every new class, method, function, global, etc.</li>
<li>Boolean arguments should be tagged with a /* name_of_param */ comment.</li>
<li>Always clang-format! Use <a href="https://github.com/pytorch/glow/blob/master/utils/format.sh">format.sh tool</a> with the <code>fix</code> argument. (The linter will catch this, but it never hurts.) </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
