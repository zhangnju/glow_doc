<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Glow: glow::runtime::HostManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Glow
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceglow.html">glow</a></li><li class="navelem"><b>runtime</b></li><li class="navelem"><a class="el" href="classglow_1_1runtime_1_1_host_manager.html">HostManager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classglow_1_1runtime_1_1_host_manager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">glow::runtime::HostManager Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_host_manager_8h_source.html">HostManager.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab6c8d08c393bd511544b59b66c173b58"><td class="memItemLeft" align="right" valign="top"><a id="ab6c8d08c393bd511544b59b66c173b58"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classglow_1_1runtime_1_1_host_manager.html#ab6c8d08c393bd511544b59b66c173b58">HostManager</a> ()=default</td></tr>
<tr class="memdesc:ab6c8d08c393bd511544b59b66c173b58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor. <br /></td></tr>
<tr class="separator:ab6c8d08c393bd511544b59b66c173b58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad30a764e2aa235864bda22cb417481d3"><td class="memItemLeft" align="right" valign="top"><a id="ad30a764e2aa235864bda22cb417481d3"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classglow_1_1runtime_1_1_host_manager.html#ad30a764e2aa235864bda22cb417481d3">HostManager</a> (const <a class="el" href="structglow_1_1runtime_1_1_host_config.html">HostConfig</a> &amp;hostConfig)</td></tr>
<tr class="memdesc:ad30a764e2aa235864bda22cb417481d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor that takes configuration options. <br /></td></tr>
<tr class="separator:ad30a764e2aa235864bda22cb417481d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a993540bff98f21c7f7a63a7b012b0697"><td class="memItemLeft" align="right" valign="top"><a id="a993540bff98f21c7f7a63a7b012b0697"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classglow_1_1runtime_1_1_host_manager.html#a993540bff98f21c7f7a63a7b012b0697">HostManager</a> (std::vector&lt; std::unique_ptr&lt; <a class="el" href="structglow_1_1runtime_1_1_device_config.html">DeviceConfig</a> &gt;&gt; deviceConfigs)</td></tr>
<tr class="memdesc:a993540bff98f21c7f7a63a7b012b0697"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor that takes a list of Devices to use. <br /></td></tr>
<tr class="separator:a993540bff98f21c7f7a63a7b012b0697"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89b0b6ca1d8a1daa7c97b48cf622f82a"><td class="memItemLeft" align="right" valign="top"><a id="a89b0b6ca1d8a1daa7c97b48cf622f82a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classglow_1_1runtime_1_1_host_manager.html#a89b0b6ca1d8a1daa7c97b48cf622f82a">HostManager</a> (std::vector&lt; std::unique_ptr&lt; <a class="el" href="structglow_1_1runtime_1_1_device_config.html">DeviceConfig</a> &gt;&gt; deviceConfigs, const <a class="el" href="structglow_1_1runtime_1_1_host_config.html">HostConfig</a> &amp;hostConfig)</td></tr>
<tr class="memdesc:a89b0b6ca1d8a1daa7c97b48cf622f82a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor that takes both Devices and the configuration. <br /></td></tr>
<tr class="separator:a89b0b6ca1d8a1daa7c97b48cf622f82a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93e479985183392e3405e8e0a38b7516"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceglow.html#afdb176c3a672ef66db0ecfc19a8d39bf">Error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classglow_1_1runtime_1_1_host_manager.html#a93e479985183392e3405e8e0a38b7516">addNetwork</a> (std::unique_ptr&lt; <a class="el" href="classglow_1_1_module.html">Module</a> &gt; module, <a class="el" href="structglow_1_1_compilation_context.html">CompilationContext</a> &amp;cctx, bool saturateHost=false)</td></tr>
<tr class="separator:a93e479985183392e3405e8e0a38b7516"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ab032d13b46dad18341e97cec4a46c6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceglow.html#afdb176c3a672ef66db0ecfc19a8d39bf">Error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classglow_1_1runtime_1_1_host_manager.html#a3ab032d13b46dad18341e97cec4a46c6">removeNetwork</a> (llvm::StringRef networkName)</td></tr>
<tr class="separator:a3ab032d13b46dad18341e97cec4a46c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d68fe3250192a62ce45ced8ab9a259c"><td class="memItemLeft" align="right" valign="top"><a id="a0d68fe3250192a62ce45ced8ab9a259c"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classglow_1_1runtime_1_1_host_manager.html#a0d68fe3250192a62ce45ced8ab9a259c">networkAdded</a> (llvm::StringRef networkName)</td></tr>
<tr class="memdesc:a0d68fe3250192a62ce45ced8ab9a259c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if <code>networkName</code> is already added to the host. <br /></td></tr>
<tr class="separator:a0d68fe3250192a62ce45ced8ab9a259c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5a22d2e34e2990459958f6e275350d8"><td class="memItemLeft" align="right" valign="top"><a id="ae5a22d2e34e2990459958f6e275350d8"></a>
<a class="el" href="namespaceglow.html#afdb176c3a672ef66db0ecfc19a8d39bf">Error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classglow_1_1runtime_1_1_host_manager.html#ae5a22d2e34e2990459958f6e275350d8">clearHost</a> ()</td></tr>
<tr class="memdesc:ae5a22d2e34e2990459958f6e275350d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes all networks from the host, and stops execution on all devices. <br /></td></tr>
<tr class="separator:ae5a22d2e34e2990459958f6e275350d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40bb5ba6c62b6697e306519271b3b936"><td class="memItemLeft" align="right" valign="top">RunIdentifierTy&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classglow_1_1runtime_1_1_host_manager.html#a40bb5ba6c62b6697e306519271b3b936">runNetwork</a> (llvm::StringRef networkName, std::unique_ptr&lt; <a class="el" href="classglow_1_1_execution_context.html">ExecutionContext</a> &gt; context, ResultCBTy callback, uint64_t priority=0)</td></tr>
<tr class="separator:a40bb5ba6c62b6697e306519271b3b936"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e65b0b9577ab3573121fd5875514da1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceglow.html#afdb176c3a672ef66db0ecfc19a8d39bf">Error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classglow_1_1runtime_1_1_host_manager.html#a6e65b0b9577ab3573121fd5875514da1">runNetworkBlocking</a> (llvm::StringRef networkName, std::unique_ptr&lt; <a class="el" href="classglow_1_1_execution_context.html">ExecutionContext</a> &gt; context)</td></tr>
<tr class="separator:a6e65b0b9577ab3573121fd5875514da1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d6086ba220183342de461d500d6dde4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceglow.html#afdb176c3a672ef66db0ecfc19a8d39bf">Error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classglow_1_1runtime_1_1_host_manager.html#a0d6086ba220183342de461d500d6dde4">runNetworkBlocking</a> (llvm::StringRef networkName, <a class="el" href="classglow_1_1_placeholder_bindings.html">PlaceholderBindings</a> &amp;bindings)</td></tr>
<tr class="separator:a0d6086ba220183342de461d500d6dde4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa074ead90b05d6cd00b82b83f142c141"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceglow.html#afdb176c3a672ef66db0ecfc19a8d39bf">Error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classglow_1_1runtime_1_1_host_manager.html#aa074ead90b05d6cd00b82b83f142c141">init</a> (std::vector&lt; std::unique_ptr&lt; <a class="el" href="structglow_1_1runtime_1_1_device_config.html">DeviceConfig</a> &gt;&gt; configs)</td></tr>
<tr class="separator:aa074ead90b05d6cd00b82b83f142c141"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91c85ef9c53652c7b470cf9e7876c4f0"><td class="memItemLeft" align="right" valign="top"><a id="a91c85ef9c53652c7b470cf9e7876c4f0"></a>
<a class="el" href="classglow_1_1detail_1_1_glow_expected.html">Expected</a>&lt; <a class="el" href="structglow_1_1runtime_1_1_d_a_g.html">DAG</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classglow_1_1runtime_1_1_host_manager.html#a91c85ef9c53652c7b470cf9e7876c4f0">getNetworkDAG</a> (llvm::StringRef network)</td></tr>
<tr class="memdesc:a91c85ef9c53652c7b470cf9e7876c4f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the network <a class="el" href="structglow_1_1runtime_1_1_d_a_g.html">DAG</a> for <code>network</code> if it exists. <br /></td></tr>
<tr class="separator:a91c85ef9c53652c7b470cf9e7876c4f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="classglow_1_1runtime_1_1_host_manager.html">HostManager</a> serves as an entry point into the Runtime environment. It provides an interface to add, run, and evict networks from the host. It handles <a class="el" href="classglow_1_1runtime_1_1_device_manager.html" title="Interface managing a specific instance of a device. ">DeviceManager</a> initialization, houses the <a class="el" href="classglow_1_1runtime_1_1_executor.html">Executor</a>, and calls into the <a class="el" href="classglow_1_1_partitioner.html">Partitioner</a> and <a class="el" href="classglow_1_1runtime_1_1_provisioner.html">Provisioner</a> for network initialization. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a93e479985183392e3405e8e0a38b7516"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93e479985183392e3405e8e0a38b7516">&#9670;&nbsp;</a></span>addNetwork()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceglow.html#afdb176c3a672ef66db0ecfc19a8d39bf">Error</a> HostManager::addNetwork </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classglow_1_1_module.html">Module</a> &gt;&#160;</td>
          <td class="paramname"><em>module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structglow_1_1_compilation_context.html">CompilationContext</a> &amp;&#160;</td>
          <td class="paramname"><em>cctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>saturateHost</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Adds the network to the host and does the necessary setup work. This includes partitioning, provisioning, compiling and initializing backends. Additionally DAGs are created for each function and stored in networks_. </p><dl class="section return"><dt>Returns</dt><dd>an Error containing the results of the operation. This function consumes the <code>module</code> so any pointers to data contained within the module should be considered invalid. The function is optimized based on <code>cctx</code>. If <code>saturateHost</code> is set to true the <a class="el" href="classglow_1_1runtime_1_1_host_manager.html">HostManager</a> will try to use all available devices on the host. </dd></dl>

</div>
</div>
<a id="aa074ead90b05d6cd00b82b83f142c141"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa074ead90b05d6cd00b82b83f142c141">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceglow.html#afdb176c3a672ef66db0ecfc19a8d39bf">Error</a> HostManager::init </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; std::unique_ptr&lt; <a class="el" href="structglow_1_1runtime_1_1_device_config.html">DeviceConfig</a> &gt;&gt;&#160;</td>
          <td class="paramname"><em>configs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize the <a class="el" href="classglow_1_1runtime_1_1_host_manager.html">HostManager</a> with the given <code>configs</code> creating one <a class="el" href="classglow_1_1runtime_1_1_device_manager.html" title="Interface managing a specific instance of a device. ">DeviceManager</a> for each config listed. </p>

</div>
</div>
<a id="a3ab032d13b46dad18341e97cec4a46c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ab032d13b46dad18341e97cec4a46c6">&#9670;&nbsp;</a></span>removeNetwork()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceglow.html#afdb176c3a672ef66db0ecfc19a8d39bf">Error</a> HostManager::removeNetwork </td>
          <td>(</td>
          <td class="paramtype">llvm::StringRef&#160;</td>
          <td class="paramname"><em>networkName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Given <code>networkName</code> removes that network from the host. This also removes the network from any backends setup to execute it. </p><dl class="section return"><dt>Returns</dt><dd>an Error indicating success or failure of the operation. </dd></dl>

</div>
</div>
<a id="a40bb5ba6c62b6697e306519271b3b936"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40bb5ba6c62b6697e306519271b3b936">&#9670;&nbsp;</a></span>runNetwork()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RunIdentifierTy HostManager::runNetwork </td>
          <td>(</td>
          <td class="paramtype">llvm::StringRef&#160;</td>
          <td class="paramname"><em>networkName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classglow_1_1_execution_context.html">ExecutionContext</a> &gt;&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ResultCBTy&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>priority</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Runs the network specified by <code>networkName</code> using the provided <code>context</code>, returns a runIdentifier which refers to the specic inference request. Calls <code>callback</code> with the results when inference is done. Note: This method is intended to be thread-safe, it will be called concurrently from multiple threads. Returns -1 if networkName not found or too many active requests. The parameter <code>priority</code> is used to indicate queueing priority, priority is lowest number first and in case of a tie the request that was submitted first will go first. </p>

</div>
</div>
<a id="a6e65b0b9577ab3573121fd5875514da1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e65b0b9577ab3573121fd5875514da1">&#9670;&nbsp;</a></span>runNetworkBlocking() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceglow.html#afdb176c3a672ef66db0ecfc19a8d39bf">Error</a> HostManager::runNetworkBlocking </td>
          <td>(</td>
          <td class="paramtype">llvm::StringRef&#160;</td>
          <td class="paramname"><em>networkName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classglow_1_1_execution_context.html">ExecutionContext</a> &gt;&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A wrapper around runNetwork that provides a blocking interface for an inference request. Runs the network provided in <code>networkName</code> using <code>context</code>. </p><dl class="section return"><dt>Returns</dt><dd>an Error indicating success or failure. </dd></dl>

</div>
</div>
<a id="a0d6086ba220183342de461d500d6dde4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d6086ba220183342de461d500d6dde4">&#9670;&nbsp;</a></span>runNetworkBlocking() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceglow.html#afdb176c3a672ef66db0ecfc19a8d39bf">Error</a> HostManager::runNetworkBlocking </td>
          <td>(</td>
          <td class="paramtype">llvm::StringRef&#160;</td>
          <td class="paramname"><em>networkName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classglow_1_1_placeholder_bindings.html">PlaceholderBindings</a> &amp;&#160;</td>
          <td class="paramname"><em>bindings</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A wrapper around runNetwork that provides a blocking interface for an inference request. Runs the network provided in <code>networkName</code> using <code>bindings</code> for placeholder bindings. </p><dl class="section return"><dt>Returns</dt><dd>an Error indicating success or failure. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/glow/Runtime/HostManager/<a class="el" href="_host_manager_8h_source.html">HostManager.h</a></li>
<li>lib/Runtime/HostManager/HostManager.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
