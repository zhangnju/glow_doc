<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Glow: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Glow
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Glow Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="image">
<object type="image/svg+xml" data="logo.svg">logo.svg</object>
<div class="caption">
Glow Logo</div></div>
<p> <a href="https://travis-ci.org/pytorch/glow"></a> <a href="https://fb-glow-assets.s3.amazonaws.com/coverage/coverage-master/index.html"></a></p>
<p>Glow is a machine learning compiler and execution engine for hardware accelerators. It is designed to be used as a backend for high-level machine learning frameworks. The compiler is designed to allow state of the art compiler optimizations and code generation of neural network graphs. This library is in active development. The project plan is described in the Github issues section and in the <a href="https://github.com/pytorch/glow/wiki/Glow-Roadmap">Roadmap</a> wiki page.</p>
<h2>Partners</h2>
<p>Contributions to Glow are welcomed and encouraged! Glow is developed in collaboration with the following partners:</p>
<table class="doxtable">
<tr>
<th align="center"><div class="image">
<img src="bitmain.png" alt="bitmain.png"/>
<div class="caption">
Bitmain Logo</div></div>
 </th><th align="center"><div class="image">
<img src="habana.png" alt="habana.png"/>
<div class="caption">
Habana Logo</div></div>
 </th><th align="center"><div class="image">
<img src="st.png" alt="st.png"/>
<div class="caption">
ST Logo</div></div>
  </th></tr>
<tr>
<td align="center"><div class="image">
<img src="cadence.png" alt="cadence.png"/>
<div class="caption">
Cadence Logo</div></div>
 </td><td align="center"><div class="image">
<img src="intel.png" alt="intel.png"/>
<div class="caption">
Intel Logo</div></div>
 </td><td align="center"><div class="image">
<img src="synopsys.png" alt="synopsys.png"/>
<div class="caption">
Synopsys Logo</div></div>
 </td></tr>
<tr>
<td align="center"><div class="image">
<img src="ceva.png" alt="ceva.png"/>
<div class="caption">
CEVA Logo</div></div>
 </td><td align="center"><div class="image">
<img src="marvell.png" alt="marvell.png"/>
<div class="caption">
Marvell Logo</div></div>
 </td><td align="center"></td></tr>
<tr>
<td align="center"><div class="image">
<img src="esperanto.png" alt="esperanto.png"/>
<div class="caption">
Esperanto Logo</div></div>
 </td><td align="center"><div class="image">
<img src="nxp.png" alt="nxp.png"/>
<div class="caption">
NXP Logo</div></div>
 </td><td align="center"></td></tr>
</table>
<h2>How does it work?</h2>
<p>Glow lowers a traditional neural network dataflow graph into a two-phase strongly-typed ./docs/IR.md "intermediate representation (IR)". The high-level IR allows the optimizer to perform domain-specific optimizations. The lower-level instruction-based address-only IR allows the compiler to perform memory-related optimizations, such as instruction scheduling, static memory allocation and copy elimination. At the lowest level, the optimizer performs machine-specific code generation to take advantage of specialized hardware features. Glow features a lowering phase which enables the compiler to support a high number of input operators as well as a large number of hardware targets by eliminating the need to implement all operators on all targets. The lowering phase is designed to reduce the input space and allow new hardware backends to focus on a small number of linear algebra primitives. The design philosophy is described in an <a href="https://arxiv.org/abs/1805.00907">arXiv paper</a>.</p>
<div class="image">
<img src="3LevelIR.png" alt="3LevelIR.png"/>
</div>
<h2>Getting Started</h2>
<h3>System Requirements</h3>
<p>Glow builds and runs on macOS and Linux. The software depends on a modern C++ compiler that supports C++11, on CMake, LLVM, glog, protocol buffers, and libpng.</p>
<h4>Get Glow!</h4>
<div class="fragment"><div class="line">git clone git@github.com:pytorch/glow.git  # or: git clone https://github.com/pytorch/glow.git</div><div class="line">cd glow</div></div><!-- fragment --><h4>Submodules</h4>
<p>Glow depends on a few submodules: googletest, onnx, and a library for FP16 conversions.</p>
<p>To get them, from the glow directory, run:</p>
<div class="fragment"><div class="line">git submodule update --init --recursive</div></div><!-- fragment --><h4>macOS</h4>
<p>Install the required dependencies using either <a href="https://brew.sh/">Homebrew</a> or <a href="https://www.macports.org/">MacPorts</a>. If using Homebrew, run:</p>
<div class="fragment"><div class="line">brew install cmake graphviz libpng ninja protobuf wget glog autopep8</div><div class="line">brew install llvm@7</div></div><!-- fragment --><p>If using MacPorts, run:</p>
<div class="fragment"><div class="line">port install cmake graphviz libpng ninja protobuf-cpp wget llvm-7.0 google-glog</div></div><!-- fragment --><p>Note that LLVM is installed in a non-default location to avoid conflicts with the system's LLVM &ndash;Homebrew usually installs LLVM in <code>/usr/local/opt/llvm/</code>, whereas MacPorts installs it in <code>/opt/local/libexec/llvm-7.0/</code>. This means that CMake will need to be told where to find LLVM when building; instructions on that can be found <a href="#building-with-dependencies-llvm">here</a>.</p>
<p>Finally, create a symbolic link to the Homebrew- or MacPorts-installed <code>clang-*</code> tools so that the <code>utils/format.sh</code> script is able to find them later on. For a Homebrew-managed installation, run: </p><div class="fragment"><div class="line">ln -s &quot;/usr/local/opt/llvm/bin/clang-format&quot; &quot;/usr/local/bin/clang-format&quot;</div><div class="line">ln -s &quot;/usr/local/opt/llvm/bin/clang-tidy&quot; &quot;/usr/local/bin/clang-tidy&quot;</div></div><!-- fragment --><p> For MacPorts, run: </p><div class="fragment"><div class="line">ln -s &quot;/opt/local/libexec/llvm-7.0/bin/clang-format&quot; &quot;/usr/local/bin/clang-format&quot;</div><div class="line">ln -s &quot;/opt/local/libexec/llvm-7.0/bin/clang-tidy&quot; &quot;/usr/local/bin/clang-tidy&quot;</div></div><!-- fragment --><blockquote class="doxtable">
<p><b>Note:</b> On newer versions of macOS, Xcode's command line tools come with a non-traditional header layout. In order for Glow to build on newer macOS versions, you might need to install <code>macOS_SDK_headers_for_macOS_10.14.pkg</code> manually. For example, on Mojave this package is located in <code>/Library/Developer/CommandLineTools/Packages/</code>. </p>
</blockquote>
<h4>Ubuntu</h4>
<p>[The following instructions have been tested on Ubuntu 16.04]</p>
<p>In order to build Glow on Ubuntu it is necessary to install a few packages. The following command should install the required dependencies:</p>
<div class="fragment"><div class="line">sudo apt-get install clang clang-8 cmake graphviz libpng-dev \</div><div class="line">    libprotobuf-dev llvm-8 llvm-8-dev ninja-build protobuf-compiler wget \</div><div class="line">    opencl-headers libgoogle-glog-dev</div></div><!-- fragment --><p> [Note: building Glow on Ubuntu 16.04 with llvm-7 fails because llvm-7 xenial distribution uses an older c++ ABI]</p>
<p>It may be desirable to use <code>update-alternatives</code> to manage the version of clang/clang++:</p>
<div class="fragment"><div class="line">sudo update-alternatives --install /usr/bin/clang clang \</div><div class="line">    /usr/lib/llvm-8/bin/clang 50</div><div class="line">sudo update-alternatives --install /usr/bin/clang++ clang++ \</div><div class="line">    /usr/lib/llvm-8/bin/clang++ 50</div></div><!-- fragment --><p>Glow uses the system default C/C++ compiler (/usr/bin/c++), and so you may also want to switch your default C/C++ compiler to clang:</p>
<div class="fragment"><div class="line">sudo update-alternatives --config cc</div><div class="line">    # Select the option corresponding to /usr/bin/clang ...</div><div class="line">sudo update-alternatives --config c++</div><div class="line">    # Select the option corresponding to /usr/bin/clang++ ...</div></div><!-- fragment --><p>Glow <em>should</em> build just fine with gcc (e.g. gcc 5.4), but we mostly use clang and are more attentive to compatibility with clang.</p>
<p>Finally, in order to support the ONNX net serialization format, Glow requires <code>protobuf &gt;= 2.6.1</code>, but the above command may install older version on older Ubuntu (e.g. 14.04). If this is the case, we suggest to look at <code>utils/install_protobuf.sh</code> to install a newer version from source.</p>
<p>For details on installing OpenCL on Ubuntu please see <a href="docs/Building.md#opencl-on-ubuntu">these instructions</a>.</p>
<h3>Configure and Build</h3>
<p>To build the compiler, create a build directory and run cmake on the source directory. It's a good idea to build two configurations (Release and Debug) because some programs take a really long time to run in Debug mode. It's also a good idea to build the project outside of the source directory.</p>
<div class="fragment"><div class="line">mkdir build_Debug</div><div class="line">cd build_Debug</div><div class="line">cmake -G Ninja -DCMAKE_BUILD_TYPE=Debug ../glow</div><div class="line">ninja all</div></div><!-- fragment --><p>It's possible to configure and build the compiler with any CMake generator, like GNU Makefiles, Ninja and Xcode build.</p>
<p>For platform-specific build instructions and advanced options, such as building with Address-Sanitizers refer to this guide: <a class="el" href="md_docs__building.html">Building the Compiler</a>.</p>
<p>If you're running Mac OS v10.14 (Mojave) and <code>ninja all</code> fails because it can't find headers (e.g. <code>string.h</code>), run this command to fix it, and try again. More information is available <a href="https://developer.apple.com/documentation/xcode_release_notes/xcode_10_release_notes">here</a> under "Command Line Tools".</p>
<div class="fragment"><div class="line">open /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg</div></div><!-- fragment --><h4>Building with dependencies (LLVM)</h4>
<p>By default, Glow will use a system provided LLVM. Note that Glow requires LLVM 7.0 or later. If you have LLVM installed in a non-default location (for example, if you installed it using Homebrew on macOS), you need to tell CMake where to find llvm using <code>-DLLVM_DIR</code>. For example, if LLVM were installed in <code>/usr/local/opt</code>:</p>
<div class="fragment"><div class="line">cmake -G Ninja ../glow \</div><div class="line">    -DCMAKE_BUILD_TYPE=Debug \</div><div class="line">    -DLLVM_DIR=/usr/local/opt/llvm@7/lib/cmake/llvm</div></div><!-- fragment --><p>If LLVM is not available on your system you'll need to build it manually. Run the script '<code>/utils/build_llvm.sh</code> to clone, build and install LLVM in a local directory. You will need to configure Glow with the flag <code>-DLLVM_DIR</code> to tell the build system where to find LLVM given the local directory you installed it in (e.g. <code>-DLLVM_DIR=/path/to/llvm_install/lib/cmake/llvm</code> if using <code>build_llvm.sh</code>).</p>
<h2>Testing and Running</h2>
<h3>Unit tests</h3>
<p>The project has a few unit tests in the tests/unittests subdirectory. To run all of them, simply run <code>ninja test</code>.</p>
<h3>C++ API examples</h3>
<p>A few test programs that use Glow's C++ API are found under the <code>examples/</code> subdirectory. The <code>mnist</code>, <code>cifar10</code>, <code>fr2en</code> and <code>ptb</code> programs train and run digit recognition, image classification and language modeling benchmarks, respectively.</p>
<p>To run these programs, build Glow in Release mode, then run the following commands to download the cifar10, mnist and ptb databases.</p>
<div class="fragment"><div class="line">python ../glow/utils/download_datasets_and_models.py --all-datasets</div></div><!-- fragment --><p>Now run the examples. Note that the databases should be in the current working directory.</p>
<div class="fragment"><div class="line">./bin/mnist</div><div class="line">./bin/cifar10</div><div class="line">./bin/fr2en</div><div class="line">./bin/ptb</div><div class="line">./bin/char-rnn</div></div><!-- fragment --><p>If everything goes well you should see:</p><ul>
<li><code>mnist</code>: pictures from the mnist digits database</li>
<li><code>cifar10</code>: image classifications that steadily improve</li>
<li><code>fr2en</code>: an interactive French-to-English translator</li>
<li><code>ptb</code>: decreasing perplexity on the dataset as the network trains</li>
<li><code>char-rnn</code>: generates random text based on some document</li>
</ul>
<p>Note that the default build mode is <code>Debug</code>, which means that the compiler itself is easy to debug because the binary contains debug info, lots of assertions, and the optimizations are disabled. It also means that the compiler and runtime are very slow, and the execution time can be hundreds of times slower than that of release builds. If you wish to benchmark the compiler, run long benchmarks, or release the product then you should compile the compiler in Release mode. Check the main CMake file for more details.</p>
<p>More details on testing and running Glow can be found in: <a class="el" href="md_docs__testing.html">Testing the Glow Compiler</a>.</p>
<h3>Ahead-of-time Compilation</h3>
<p>Glow can be used to compile neural networks into object files containing native code. We provide resnet50 (both quantized and non-quantized versions) as an example of this capability in <code>examples/bundles/resnet50</code>. See <a class="el" href="md_docs__a_o_t.html">Creating</a>Standalone Executable Bundles" for more detail.</p>
<h2>Contributing</h2>
<p>To get started contributing, please refer to the following guides:</p><ul>
<li>Contributing</li>
<li><a class="el" href="md_docs__coding_standards.html">Coding Standards</a></li>
<li>Code of Conduct</li>
</ul>
<h3>Communication</h3>
<ul>
<li>Forums: discuss implementations, research, etc: <a href="https://discuss.pytorch.org/c/glow">https://discuss.pytorch.org/c/glow</a>. Make sure to label topic with the <a href="https://discuss.pytorch.org/c/glow">"glow"</a> category.</li>
<li>GitHub issues: bug reports, feature requests, install issues, RFCs, thoughts, etc.</li>
</ul>
<h2>License</h2>
<p>Glow is licensed under the [Apache 2.0 License](LICENSE). </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
